@if (!showModal()) {
    @if(showDeleteModal) {
        <app-modal [title]="deleteTitle" 
            [message]="deleteMsg"
            (cancelButton)="closeDeleteModal()"
            (confirmButton)="removeAccount()">
        </app-modal>

        <ng-template #extraContent>
            <div class="mt-3">
                <strong>Additional Info:</strong>
                <p>This content is inserted via template.</p>
            </div>
        </ng-template>
    }
    <div>
        <div class="row justify-content-center">
            <div class="col-12 col-md-10 col-lg-8">
                <app-info-section
                    title="Accounts"
                    bodyMsg="Add and manage your financial accounts in one place to get a complete view of your finances. 
                             By linking your accounts, you can track balances, monitor activity, and gain better insight into your overall financial picture. 
                             Your information is securely stored and used only to provide accurate, up-to-date account details">
                </app-info-section>
            </div>
        </div>

        <div class="row mt-4 g-3 justify-content-center align-items-end add-account-row">
            <div class="col-12 col-sm-6 col-md-3">
                <strong>Name</strong>
                <input class="form-control account-input" placeholder="Account Nickname" [(ngModel)]="acctName"/>
            </div>

            <div class="col-12 col-sm-6 col-md-3">
                <strong>Balance ($)</strong>
                <input class="form-control account-input" placeholder="Balance" [(ngModel)]="acctBalance" />
            </div>

            <div class="col-12 col-sm-6 col-md-3">
                <strong>Type</strong>
                <input class="form-control account-input" placeholder="Savings, checking, etc." [(ngModel)]="acctType" (keydown.enter)="addAccount()" />
            </div>

            <div class="col-12 col-sm-6 col-md-1 text-center">
                <button class="btn btn-success w-100" (click)="addAccount()">
                    <i class="fa-solid fa-plus"></i>
                </button>
            </div>
        </div>

        <h3 class="mt-4 text-start">Added Accounts</h3>
        <div class="table-responsive mt-3">
            <table class="table table-bordered table-hover">
                <thead class="thead-dark">
                    <tr>
                        <th>Name</th>
                        <th>Balance</th>
                        <th>Type</th>
                        <th>Date Added</th>
                        <th></th>
                    </tr>
                </thead>   
                <tbody>
                    @for (acct of personalAccts$ | async; track acct)
                    {
                        <tr class="clickable-row" (click)="selectAccount(acct)">
                            <td>{{acct.Name}}</td>
                            <td class="currency">{{acct.Balance  | currency:'USD':'symbol':'1.2-2' }}</td>
                            <td>{{acct.Type}}</td>
                            <td>{{acct.DateAdded}}</td>
                            <td>
                                <button class="btn btn-sm btn-danger" (click)="openDeleteModal(acct.Id, acct.Name);  $event.stopPropagation()">
                                    <i class="fa-solid fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
}
@else {
    <div class="d-flex align-items-center justify-content-center edit-modal-container">
        <div class="card shadow p-4 edit-card">
            <h4 class="text-center mb-3">Edit <span class="fst-italic">{{selectedAccount().Name}}</span></h4>
            <h6 class="mb-4 text-center">Edit account details here</h6>

            <div class="row g-3 justify-content-center">
                <div class="col-12 col-md-6">
                    <label class="form-label"><strong>Account Name</strong></label>
                    <input type="text" class="form-control account-input" [(ngModel)]="selectedAccount().Name" />
                </div>
                <div class="col-12 col-md-6">
                    <label class="form-label"><strong>Account Type</strong></label>
                    <input type="text" class="form-control account-input" [(ngModel)]="selectedAccount().Type" />
                </div>
                <div class="col-12 col-md-6">
                    <label class="form-label"><strong>Balance ($)</strong></label>
                    <input type="number" class="form-control account-input" [(ngModel)]="selectedAccount().Balance" />
                </div>
            </div>

            <div class="row g-3 mt-4 justify-content-center">
                <div class="col-auto">
                    <button class="btn btn-danger" (click)="closeModal()">
                        <i class="fa-solid fa-ban fs-4"></i>
                    </button>
                </div>
                <div class="col-auto">
                    <button class="btn btn-success" (click)="updateAccount(selectedAccount())">
                        <i class="fas fa-save fs-4"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
}
